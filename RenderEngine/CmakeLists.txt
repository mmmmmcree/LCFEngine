project(RenderEngine)

file(GLOB_RECURSE HEADERS "include/*.h")
file(GLOB_RECURSE SOURCES "src/*.cpp") 

add_library(${PROJECT_NAME} STATIC
    ${HEADERS}
    ${SOURCES} 
)
     
find_package(unofficial-shaderc CONFIG REQUIRED)
find_package(spirv_cross_core CONFIG REQUIRED)
find_package(spirv_cross_glsl CONFIG REQUIRED)
find_package(spirv_cross_cpp CONFIG REQUIRED)
find_package(Boost CONFIG REQUIRED)
find_package(assimp CONFIG REQUIRED)
     
include_directories( 
  ${CMAKE_CURRENT_SOURCE_DIR}/include 
)     

target_include_directories(${PROJECT_NAME}
    PUBLIC 
        $<INSTALL_INTERFACE:include>
        $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
    PRIVATE 
        ${CMAKE_CURRENT_SOURCE_DIR}/src
)          

target_link_libraries(${PROJECT_NAME}
    PUBLIC   
        graphic_api_config
        containers
        math
        utilities 
        GUI 
        core 
        Boost::headers   
    PRIVATE 
        unofficial::shaderc::shaderc
        spirv-cross-core spirv-cross-glsl spirv-cross-cpp
        assimp::assimp
)  

if(USE_VULKAN)
    find_package(Vulkan REQUIRED)
    find_package(VulkanMemoryAllocator CONFIG REQUIRED)
    target_link_libraries(${PROJECT_NAME}
        PRIVATE
            Vulkan::Vulkan
            GPUOpen::VulkanMemoryAllocator 
    )
endif()